
all:

this: Contribute.html

Contribute.html: Contribute.md ./markdown-cfg.json
	markdown-cli -i Contribute.md -o Contribute.html -c ./markdown-cfg.json

# Local copies of all the .md files
doc:
	( cd AesSrp ; make doc )
	( cd BasicAuth ; make doc )
	( cd BasicAuthPgSQL ; make doc )
	( cd BasicAuthRedis ; make doc )
	( cd Cookie ; make doc )
	( cd DirectoryBrowse ; make doc )
	( cd DumpRequest ; make doc )
	( cd DumpResponse ; make doc )
	( cd Echo ; make doc )
	( cd Else ; make doc )
	( cd ErrorTemplate ; make doc )
	( cd GeoIpFilter ; make doc )
	( cd GoTemplate ; make doc )
	( cd Gzip ; make doc )
	( cd HTML5Path ; make doc )
	( cd Header ; make doc )
	( cd InMemoryCache ; make doc )
	( cd JSONToTable ; make doc )
	( cd JSONp ; make doc )
	( cd LimitExtensionTo ; make doc )
	( cd LimitPathReTo ; make doc )
	( cd LimitPathTo ; make doc )
	( cd Logging ; make doc )
	( cd LoginRequired ; make doc )
	( cd Minify ; make doc )
	( cd RedirToHttps ; make doc )
	( cd Redirect ; make doc )
	( cd RedisList ; make doc )
	( cd RedisListRaw ; make doc )
	( cd RejectDirectory ; make doc )
	( cd RejectExtension ; make doc )
	( cd RejectIpAddress ; make doc )
	( cd RejectPath ; make doc )
	( cd RejectRePath ; make doc )
	( cd Rewrite ; make doc )
	( cd Status ; make doc )

skipped:
	( cd AesSrp ; echo AesSrp ; go test )

test:
	( cd BasicAuth ; echo BasicAuth ; go test )
	( cd BasicAuthPgSQL ; echo BasicAuthPgSQL ; go test )
	( cd BasicAuthRedis ; echo BasicAuthRedis ; go test )
	( cd Cookie ; echo Cookie ; go test )
	( cd DirectoryBrowse ; echo DirectoryBrowse ; go test )
	( cd DumpRequest ; echo DumpRequest ; go test )
	( cd DumpResponse ; echo DumpResponse ; go test )
	( cd Echo ; echo Echo ; go test )
	( cd Else ; echo Else ; go test )
	( cd ErrorTemplate ; echo ErrorTemplate ; go test )
	( cd GeoIpFilter ; echo GeoIpFilter ; go test )
	( cd GoTemplate ; echo GoTemplate ; go test )
	( cd Gzip ; echo Gzip ; go test )
	( cd HTML5Path ; echo HTML5Path ; go test )
	( cd InMemoryCache ; echo InMemoryCache ; go test )
	( cd JSONToTable ; echo JSONToTable ; go test )
	( cd JSONp ; echo JSONp ; go test )
	( cd Header ; echo Header ; go test )
	( cd LimitExtensionTo ; echo LimitExtensionTo ; go test )
	( cd LimitPathReTo ; echo LimitPathReTo ; go test )
	( cd LimitPathTo ; echo LimitPathTo ; go test )
	( cd Logging ; echo Logging ; go test )
	( cd LoginRequired ; echo LoginRequired ; go test )
	( cd Minify ; echo Minify ; go test )
	( cd RedisList ; echo RedisList ; go test )				
	( cd RedisListRaw ; echo RedisListRaw ; go test )	
	( cd RedirToHttps ; echo RedirToHttps ; go test )
	( cd Redirect ; echo Redirect ; go test )
	( cd RejectDirectory ; echo RejectDirectory ; go test )
	( cd RejectExtension ; echo RejectExtension ; go test )
	( cd RejectIpAddress ; echo RejectIpAddress ; go test )
	( cd RejectPath ; echo RejectPath ; go test )
	( cd RejectRePath ; echo RejectRePath ; go test )
	( cd Rewrite ; echo Rewrite ; go test )
	( cd Status ; echo Status ; go test )


mkdocs:
	cp /dev/null ./m.list
	cp /dev/null ./tmp2
	( cd AesSrp ; make mkdocs )
	( cd BasicAuth ; make mkdocs )
	( cd BasicAuthPgSQL ; make mkdocs )
	( cd BasicAuthRedis ; make mkdocs )
	( cd Cookie ; make mkdocs )
	( cd DirectoryBrowse ; make mkdocs )
	( cd DumpRequest ; make mkdocs )
	( cd DumpResponse ; make mkdocs )
	( cd Echo ; make mkdocs )
	( cd Else ; make mkdocs )
	( cd ErrorTemplate ; make mkdocs )
	( cd GeoIpFilter ; make mkdocs )
	( cd GoTemplate ; make mkdocs )
	( cd Gzip ; make mkdocs )
	( cd HTML5Path ; make mkdocs )
	( cd Header ; make mkdocs )
	( cd InMemoryCache ; make mkdocs )
	( cd JSONToTable ; make mkdocs )
	( cd JSONp ; make mkdocs )
	( cd LimitExtensionTo ; make mkdocs )
	( cd LimitPathReTo ; make mkdocs )
	( cd LimitPathTo ; make mkdocs )
	( cd Logging ; make mkdocs )
	( cd LoginRequired ; make mkdocs )
	( cd Minify ; make mkdocs )
	( cd RedirToHttps ; make mkdocs )
	( cd Redirect ; make mkdocs )
	( cd RedisList ; make mkdocs )
	( cd RedisListRaw ; make mkdocs )
	( cd RejectDirectory ; make mkdocs )
	( cd RejectExtension ; make mkdocs )
	( cd RejectIpAddress ; make mkdocs )
	( cd RejectPath ; make mkdocs )
	( cd RejectRePath ; make mkdocs )
	( cd Rewrite ; make mkdocs )
	( cd Status ; make mkdocs )
	./line1.sh >tmp1
	m4 -P chq.m4 middleware.hdr.m4 >middleware.hdr.md
	cat ./middleware.hdr.md tmp2 ./middleware.ftr.md >../Go-FTL-Docs/docs/middleware.md


